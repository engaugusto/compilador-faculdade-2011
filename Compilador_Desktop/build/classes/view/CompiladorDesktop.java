/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * CompiladorDesktop.java
 *
 * Created on 05/05/2011, 14:48:47
 */
package view;

import HandleView.Handle;
import java.io.FileWriter;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author Admin
 */
public class CompiladorDesktop extends javax.swing.JFrame {

   /** Creates new form CompiladorDesktop */
    public CompiladorDesktop() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        bgModes = new javax.swing.ButtonGroup();
        jScrollPane1 = new javax.swing.JScrollPane();
        txtCodigo = new javax.swing.JEditorPane();
        rbLexica = new javax.swing.JRadioButton();
        rbSintatica = new javax.swing.JRadioButton();
        rbSemantica = new javax.swing.JRadioButton();
        rbAssembly = new javax.swing.JRadioButton();
        jSeparator1 = new javax.swing.JSeparator();
        jSeparator2 = new javax.swing.JSeparator();
        jScrollPane2 = new javax.swing.JScrollPane();
        txtDebug = new javax.swing.JEditorPane();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jScrollPane3 = new javax.swing.JScrollPane();
        txtOutput = new javax.swing.JEditorPane();
        jLabel3 = new javax.swing.JLabel();
        btnRun = new javax.swing.JButton();
        jSeparator3 = new javax.swing.JSeparator();
        btnConvert2C = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Compilador Dude++");

        jScrollPane1.setViewportView(txtCodigo);

        bgModes.add(rbLexica);
        rbLexica.setSelected(true);
        rbLexica.setText("Análise Léxica");

        bgModes.add(rbSintatica);
        rbSintatica.setText("Análise Sintática");

        bgModes.add(rbSemantica);
        rbSemantica.setText("Análise Semântica");

        bgModes.add(rbAssembly);
        rbAssembly.setText("Assembly");

        jScrollPane2.setViewportView(txtDebug);

        jLabel1.setText("Debug");

        jLabel2.setText("Editor");

        jScrollPane3.setViewportView(txtOutput);

        jLabel3.setText("Saída do Compilador");

        btnRun.setText("Executar");
        btnRun.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnRunActionPerformed(evt);
            }
        });

        btnConvert2C.setText("Converter em C");
        btnConvert2C.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConvert2CActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel3)
                    .addComponent(jSeparator3, javax.swing.GroupLayout.DEFAULT_SIZE, 724, Short.MAX_VALUE)
                    .addComponent(jSeparator1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 724, Short.MAX_VALUE)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 724, Short.MAX_VALUE)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 724, Short.MAX_VALUE)
                    .addComponent(jLabel2)
                    .addComponent(jLabel1)
                    .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 724, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(rbLexica)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(rbSintatica)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(rbSemantica)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(rbAssembly)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 138, Short.MAX_VALUE)
                        .addComponent(btnConvert2C)
                        .addGap(18, 18, 18)
                        .addComponent(btnRun))
                    .addComponent(jSeparator2, javax.swing.GroupLayout.DEFAULT_SIZE, 724, Short.MAX_VALUE))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(47, 47, 47)
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 271, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(rbLexica)
                    .addComponent(rbSintatica)
                    .addComponent(rbSemantica)
                    .addComponent(rbAssembly)
                    .addComponent(btnRun)
                    .addComponent(btnConvert2C))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jSeparator2, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jSeparator3, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(5, 5, 5)
                .addComponent(jLabel3)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 60, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnRunActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnRunActionPerformed
        //Criando a handler da View para começar a analisar o código
        Handle hand = new Handle();
        try {   
            //passando os campos da tela para a handle
            hand.Analise(txtCodigo.getText(), txtOutput.getText(), txtDebug.getText(), rbLexica.isSelected(), rbSemantica.isSelected(), rbSintatica.isSelected(), rbAssembly.isSelected());
        } catch (Exception ex) {
            Logger.getLogger(CompiladorDesktop.class.getName()).log(Level.SEVERE, null, ex);
        }
        //mostrando o resultado da analise na output
        txtOutput.setText(hand.getTela().getOutput());
        //mostrando os resultados de debug das analises
        txtDebug.setText(hand.getTela().getDebug());
    }//GEN-LAST:event_btnRunActionPerformed

    private void btnConvert2CActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnConvert2CActionPerformed
        Handle hand = new Handle();
        try{
            hand.Convert2C(txtCodigo.getText() ,txtDebug.getText() ,txtOutput.getText());
        }catch(Exception ex){
            Logger.getLogger(CompiladorDesktop.class.getName()).log(Level.SEVERE, null, ex);
        }
        //mostrando o resultado da analise na output
        txtOutput.setText(hand.getTela().getOutput());
        //mostrando os resultados de debug das analises
        //txtDebug.setText(hand.getTela().getDebug());
    }//GEN-LAST:event_btnConvert2CActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new CompiladorDesktop().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.ButtonGroup bgModes;
    private javax.swing.JButton btnConvert2C;
    private javax.swing.JButton btnRun;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JSeparator jSeparator3;
    private javax.swing.JRadioButton rbAssembly;
    private javax.swing.JRadioButton rbLexica;
    private javax.swing.JRadioButton rbSemantica;
    private javax.swing.JRadioButton rbSintatica;
    private javax.swing.JEditorPane txtCodigo;
    private javax.swing.JEditorPane txtDebug;
    private javax.swing.JEditorPane txtOutput;
    // End of variables declaration//GEN-END:variables
}
